# Home Screen - Exact Kotlin Match

**Task:** Rewrite Flutter home_screen.dart to exactly match Kotlin HomeScreen.kt

## Kotlin Implementation Analysis (Summary from HOMESCREEN_ANALYSIS.md)

### Visual Design

**Background:** Vertical gradient spanning full screen
- Dark theme: #0F172A → #1E1B4B → #172554 (slate-900 → indigo-950 → blue-950)
- Light theme: #E0E7FF → #FCE7F3 → #DDD6FE (indigo-200 → pink-100 → violet-200)

**Content (in order):**
1. Header text: "Start a workout" (24sp, Bold)
2. Active Program Card (conditional - only if activeProgram exists)
3. Four Workout Cards (vertical list with 18dp spacing)

**Spacing:**
- Screen padding: 20dp all sides
- Item spacing: 18dp between all children

### Structure

```
Container (fillMaxSize, gradient background)
└── Column (padding: 20dp, spacing: 18dp)
    ├── Text: "Start a workout"
    ├── HomeActiveProgramCard (conditional)
    ├── WorkoutCard: "Just Lift"
    ├── WorkoutCard: "Single Exercise"
    ├── WorkoutCard: "Daily Routines"
    └── WorkoutCard: "Weekly Programs"
```

### Active Program Card (if activeProgram != null)

**Container:**
- Card with 16dp rounded corners
- Surface color background (#1E1E1E dark, #FFFFFF light)
- 1dp border: #F5F3FF (purple-50)
- 4dp elevation
- Padding: 16dp all sides

**Content:**
- Title: "Today's Program" or program name
- Exercise list (if hasWorkoutToday):
  - Format: "{Exercise} | {Reps} | {Weight} | {Mode}"
  - Example: "Chest Press | 10, 10, 12 | 45.0 lbs | Concentric"
  - Spacing: 4dp between exercises
  - Weight display logic:
    - Uniform weights: single value "%.1f {unit}"
    - Varied weights: range "%.1f-%.1f {unit}"
- Start Routine Button (fillMaxWidth, primary color)
  - Icon: PlayArrow + 8dp spacer + Text "Start Routine"
  - Enabled only when todayRoutine != null
- Rest day display (if !hasWorkoutToday):
  - Text: "Rest day" (bodyMedium, onSurfaceVariant color)

### Workout Card Component (4 instances)

**Card Container:**
- Shape: 16dp rounded corners
- Background: surface color
- Border: 1dp solid #F5F3FF (purple-50)
- Elevation: 4dp default, 2dp when pressed
- Width: fillMaxWidth
- **Press Animation:** Spring bounce (scale 1.0 → 0.97 → 1.0, ~200-300ms)

**Internal Row (padding: 16dp, spacing: 16dp):**

1. **Icon Container Box (64x64dp):**
   - Shape: 12dp rounded corners
   - Shadow: 4dp
   - Background: Linear gradient (unique per card)
   - Icon: 32x32dp, onPrimary tint (white/dark for contrast)

2. **Content Column (weight: 1f, spacing: 4dp):**
   - **Title:** 16sp, Bold, onSurface color
   - **Description:** 12sp, Normal, onSurfaceVariant color

3. **Arrow Circle (36x36dp):**
   - Background: #F5F3FF (purple-50 circle)
   - Icon: ArrowForward 16x16dp, #9333EA (purple-500) tint

### Card 1: Just Lift
- Title: "Just Lift"
- Description: "Quick setup, start lifting immediately"
- Icon: FitnessCenter (dumbbell)
- Gradient: #9333EA → #7E22CE (purple-500 → purple-700)
- Route: "just_lift"

### Card 2: Single Exercise
- Title: "Single Exercise"
- Description: "Perform one exercise with custom configuration"
- Icon: PlayArrow
- Gradient: #8B5CF6 → #9333EA (violet-500 → purple-600)
- Route: "single_exercise"

### Card 3: Daily Routines
- Title: "Daily Routines"
- Description: "Choose from your saved multi-exercise routines"
- Icon: CalendarToday
- Gradient: #6366F1 → #8B5CF6 (indigo-500 → violet-600)
- Route: "daily_routines"

### Card 4: Weekly Programs
- Title: "Weekly Programs"
- Description: "Follow a structured weekly training schedule"
- Icon: DateRange
- Gradient: #3B82F6 → #6366F1 (blue-500 → indigo-600)
- Route: "weekly_programs"

## Current Flutter Implementation (WRONG)

### Problems
❌ Header: "Welcome back!" instead of "Start a workout"
❌ Has date display (not in Kotlin)
❌ Has Stats Cards row (Workouts, Volume, PRs) - NOT in Kotlin
❌ Has "Recent Activity" section with workout list - NOT in Kotlin
❌ Quick Actions in 2x2 grid instead of vertical list
❌ Quick action cards are simple (icon + title only)
❌ No gradient background
❌ No gradient icon containers
❌ No arrow circles on cards
❌ No card descriptions
❌ No press animations
❌ Different spacing (uses AppSpacing instead of exact 18dp/20dp)
❌ Uses ListView instead of Column with gradient Box
❌ Active Program Card structure different

## Required Changes

### 1. Remove Flutter-Only Elements
- ❌ Remove "Welcome back!" and date
- ❌ Remove entire Stats Cards row (workoutsAsync.when block lines 46-88)
- ❌ Remove "Recent Activity" section (lines 147-178)
- ❌ Remove "View All History" button
- ❌ Remove GridView for quick actions

### 2. Create Gradient Background
```dart
Container(
  decoration: BoxDecoration(
    gradient: LinearGradient(
      begin: Alignment.topCenter,
      end: Alignment.bottomCenter,
      colors: isDark
        ? [Color(0xFF0F172A), Color(0xFF1E1B4B), Color(0xFF172554)]
        : [Color(0xFFE0E7FF), Color(0xFFFCE7F3), Color(0xFFDDD6FE)],
    ),
  ),
  child: Column(...),
)
```

### 3. Update Header
```dart
Text(
  'Start a workout',
  style: theme.textTheme.headlineSmall?.copyWith(
    fontWeight: FontWeight.bold,
  ),
)
```

### 4. Implement HomeActiveProgramCard Widget
**Create new file:** `lib/presentation/widgets/cards/home_active_program_card.dart`

```dart
class HomeActiveProgramCard extends ConsumerWidget {
  final WeeklyProgramWithDays program;
  final List<Routine> routines;
  final WeightUnit weightUnit;
  final VoidCallback? onStartRoutine;

  // Implementation matching Kotlin structure:
  // - Card with purple border
  // - Exercise list with format: "{Name} | {Reps} | {Weight} | {Mode}"
  // - Start Routine button (fillMaxWidth, PlayArrow icon)
  // - Rest day display if no workout today
}
```

### 5. Implement WorkoutCard Widget
**Create new file:** `lib/presentation/widgets/cards/workout_card.dart`

```dart
class WorkoutCard extends StatefulWidget {
  final String title;
  final String description;
  final IconData icon;
  final Gradient gradient;
  final VoidCallback onTap;

  // Implementation:
  // - Card with spring animation on press
  // - Row with 3 elements:
  //   1. Gradient icon box (64x64, 12dp corners, 32dp icon)
  //   2. Column (title Bold 16sp + description 12sp)
  //   3. Arrow circle (36x36, purple background, 16dp arrow)
  // - Scale animation: 1.0 → 0.97 → 1.0
  // - Elevation: 4dp → 2dp → 4dp
}
```

### 6. Rewrite home_screen.dart Layout
```dart
Container(
  width: double.infinity,
  height: double.infinity,
  decoration: BoxDecoration(gradient: ...),
  child: Padding(
    padding: EdgeInsets.all(20),
    child: Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        // Header
        Text('Start a workout', style: ...),

        SizedBox(height: 18),

        // Active Program Card (conditional)
        if (activeProgram != null)
          HomeActiveProgramCard(...),

        if (activeProgram != null)
          SizedBox(height: 18),

        // 4 Workout Cards
        WorkoutCard(
          title: 'Just Lift',
          description: 'Quick setup, start lifting immediately',
          icon: Icons.fitness_center,
          gradient: LinearGradient(
            colors: [Color(0xFF9333EA), Color(0xFF7E22CE)],
          ),
          onTap: () => context.go(Routes.justLift),
        ),

        SizedBox(height: 18),

        WorkoutCard(
          title: 'Single Exercise',
          description: 'Perform one exercise with custom configuration',
          icon: Icons.play_arrow,
          gradient: LinearGradient(
            colors: [Color(0xFF8B5CF6), Color(0xFF9333EA)],
          ),
          onTap: () => context.go(Routes.singleExercise),
        ),

        SizedBox(height: 18),

        WorkoutCard(
          title: 'Daily Routines',
          description: 'Choose from your saved multi-exercise routines',
          icon: Icons.calendar_today,
          gradient: LinearGradient(
            colors: [Color(0xFF6366F1), Color(0xFF8B5CF6)],
          ),
          onTap: () => context.go(Routes.homeRoutines),
        ),

        SizedBox(height: 18),

        WorkoutCard(
          title: 'Weekly Programs',
          description: 'Follow a structured weekly training schedule',
          icon: Icons.date_range,
          gradient: LinearGradient(
            colors: [Color(0xFF3B82F6), Color(0xFF6366F1)],
          ),
          onTap: () => context.go(Routes.weeklyPrograms),
        ),
      ],
    ),
  ),
)
```

### 7. Spring Animation Implementation
```dart
// In WorkoutCard State:
bool _isPressed = false;
late AnimationController _controller;
late Animation<double> _scaleAnimation;

@override
void initState() {
  super.initState();
  _controller = AnimationController(
    duration: Duration(milliseconds: 250),
    vsync: this,
  );
  _scaleAnimation = Tween<double>(begin: 1.0, end: 0.97).animate(
    CurvedAnimation(parent: _controller, curve: Curves.easeInOut),
  );
}

void _handleTap() {
  _controller.forward().then((_) {
    _controller.reverse();
    widget.onTap();
  });
}
```

### 8. Remove Unused Providers
Since we're removing stats and recent activity, we can simplify:
- Keep `weeklyProgramsProvider` for Active Program Card
- Remove dependency on `workoutHistoryProvider` (stats/recent activity)
- Remove dependency on `personalRecordsProvider` (stats)

## Implementation Checklist

- [ ] Create `WorkoutCard` widget with gradient icon box, title/description, arrow circle
- [ ] Implement spring bounce animation (scale 0.97, elevation change)
- [ ] Create `HomeActiveProgramCard` widget with exercise list and Start button
- [ ] Implement weight formatting logic (uniform vs range)
- [ ] Add gradient background to HomeScreen
- [ ] Change header to "Start a workout"
- [ ] Remove Stats Cards section
- [ ] Remove Recent Activity section
- [ ] Remove View All History button
- [ ] Replace GridView with vertical Column of WorkoutCards
- [ ] Use exact spacing: 20dp screen padding, 18dp between items
- [ ] Use exact colors from Kotlin (hex codes in analysis)
- [ ] Test animations on card press
- [ ] Verify gradient backgrounds match Kotlin screenshots
- [ ] Run flutter analyze
- [ ] Test navigation to all 4 routes

## File Locations

**Target files:**
- `lib/presentation/screens/home_screen.dart` (complete rewrite)
- `lib/presentation/widgets/cards/workout_card.dart` (new file)
- `lib/presentation/widgets/cards/home_active_program_card.dart` (new file)

## Verification

After implementation, verify:
- ✅ Gradient background matches Kotlin (dark/light variants)
- ✅ Header is "Start a workout" (24sp Bold)
- ✅ Active Program Card displays only when activeProgram exists
- ✅ Four workout cards in vertical list with 18dp spacing
- ✅ Each card has gradient icon box (64x64, 12dp corners)
- ✅ Each card has title (Bold 16sp) + description (12sp)
- ✅ Each card has purple arrow circle (36x36)
- ✅ Spring bounce animation on card press (scale 0.97)
- ✅ Elevation changes 4dp → 2dp on press
- ✅ NO stats cards
- ✅ NO recent activity
- ✅ NO welcome message
- ✅ Screen padding is 20dp
- ✅ Item spacing is 18dp
